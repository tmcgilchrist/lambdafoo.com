<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
      
        Hacking the Meraki &middot; Perpetually Curious Blog
      
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="../css/poole.css">
  <link rel="stylesheet" href="../css/syntax.css">
  <link rel="stylesheet" href="../css/lanyon.css">
  <link rel="stylesheet" href="../css/book.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../images/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="../images/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="../atom.xml">

  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-28532776-1', 'auto');
    ga('send', 'pageview');
  </script>
<!-- End Google Analytics -->
  <a rel="me" hidden="true" href="https://hachyderm.io/@tsmc">Mastodon</a>
</head>


  <body class="sidebar-overlay">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">

  <div class="sidebar-item">
    <img src="../images/tim-movember-2009.jpg" />
    <p>Tim McGilchrist</p>
    <p>Principal Software Engineer at Tarides</p>

    <p>
      Twitter: <a href="https://twitter.com/lambda_foo">@lambda_foo</a><br>
      Github: <a href="https://github.com/tmcgilchrist">tmcgilchrist</a><br>
      Email: <a href="mailto:timmcgil@gmail.com">timmcgil@gmail.com</a><br>
      LinkedIn: <a href="https://www.linkedin.com/in/timmcgilchrist">Tim McGilchrist</a>
    </p>

  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="../">
      Blog
    </a>
    <a class="sidebar-nav-item" href="../about">
      About
    </a>
    <a class="sidebar-nav-item" href="../talks">
      Talks
    </a>
    <a class="sidebar-nav-item" href="../server-room">
      Server Room
    </a>
    <p class="sidebar-nav-item">
      Feed:
      <a href="../rss.xml">
        RSS
      </a>
      /
      <a href="../atom.xml">
        Atom
      </a>
    </p>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; Tim McGilchrist 2007-2024
    </p>
    <p>
      Powered by Hakyll
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="../" title="Home">Perpetually Curious Blog</a>
            
            <span class="masthead-links">
              <a href="../">Blog</a> |
              <a href="../pages/about.html">About</a> |
              <a href="../archive.html">Archive</a> |
              <a href="../pages/talks.html">Talks</a> |
              <a href="../pages/server-room.html">Server Room</a>
            </span>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Hacking the Meraki</h1>
  <span class="post-date">February 28, 2008</span>
  <p>Success!</p>
<p>The Meraki Mini has now had it’s internals revealed and a serial cable
attached. It’s ready for real work now!</p>
<pre class="shell"><code>
    Ethernet eth0: MAC address 00:18:XX:XX:XX:XX
    IP: 192.168.XX.XX/255.255.255.0, Gateway: 0.0.0.0
    Default server: 192.168.XX.XX

    RedBoot(tm) bootstrap and debug environment [ROMRAM]
    Release, version V1.04 - built 12:24:00, Apr 17 2006

    Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.

    Board: Meraki Mini
    RAM: 0x80000000-0x82000000, [0x8003d110-0x80fe1000] available
    FLASH: 0xa8000000 - 0xa87e0000, 128 blocks of 0x00010000 bytes each.
    == Executing boot script in 2.000 seconds - enter ^C to abort
    ^C
    RedBoot&gt;
    Continue....[Y/n]
    RedBoot&gt; load art_mini.elf
    Using default protocol (TFTP)
    __udp_sendto: Can't find address of server
    Can't load 'art_mini.elf': some sort of network error
    RedBoot&gt; go
    No entry point known - aborted
    RedBoot&gt; load -h 192.168.XX.X -p 80 -m http /meraki/mini.1.img
    Unable to reach host 192.168.XX.X (192.168.XX.X)
    RedBoot&gt; exec
    Can't execute Linux - invalid entry address
    RedBoot&gt; fis load stage2
    RedBoot&gt; exec
    Now booting linux kernel:
    Base address 0x80030000 Entry 0x80100000
    Cmdline :
    starting stage2
    reading flash at 0xa8150000 - 0xa8413a90... done
    Calculating CRC... 0xcf267f1d - matches
    decompressing... done
    starting linux
    Linux version 2.6.16.16-meraki-mini (cliff@bug.meraki.net) (gcc version 3.4.6 (OpenWrt-2.0)) #2187
    CPU revision is: 00019064
    Determined physical RAM map:
    memory: 02000000 @ 00000000 (usable)
    Built 1 zonelists
    Kernel command line:
    Primary instruction cache 16kB, physically tagged, 4-way, linesize 16 bytes.
    Primary data cache 16kB, 4-way, linesize 16 bytes.
    Synthesized TLB refill handler (20 instructions).
    Synthesized TLB load handler fastpath (32 instructions).
    Synthesized TLB store handler fastpath (32 instructions).
    Synthesized TLB modify handler fastpath (31 instructions).
    PID hash table entries: 256 (order: 8, 4096 bytes)
    Using 92.000 MHz high precision timer.
    Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
    Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
    Memory: 20664k/32768k available (2154k kernel code, 12088k reserved, 398k data, 8832k init, 0k hi)
    Mount-cache hash table entries: 512
    Checking for 'wait' instruction...  available.
    unpacking initramfs....done
    NET: Registered protocol family 16
    Algorithmics/MIPS FPU Emulator v1.5
    JFFS2 version 2.2. (NAND) (C) 2001-2003 Red Hat, Inc.
    Initializing Cryptographic API
    io scheduler noop registered
    io scheduler anticipatory registered (default)
    io scheduler deadline registered
    io scheduler cfq registered
    faulty_init
    watchdog hb: 90  ISR: 0x21  IMR: 0x8  WD : 0x8eac3ead  WDC: 0x0
    ar2315_wdt_init using heartbeat 90 s cycles 3600000000
    watchdog hb: 90  ISR: 0x21  IMR: 0x88  WD : 0xd68e7abf  WDC: 0x0
    Serial: 8250/16550 driver $Revision: 1.90 $ 1 ports, IRQ sharing disabled
    serial8250: ttyS0 at MMIO 0xb1100003 (irq = 37) is a 16550A
    eth0: Dropping NETIF_F_SG since no checksum feature.
    eth0: Atheros AR2313: 00:18:0a:01:56:72, irq 4
    tun: Universal TUN/TAP device driver, 1.6
    tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
    MTD driver for SPI flash.
    spiflash: Probing for Serial flash ...
    spiflash: Found SPI serial Flash.
    8388608: size
    RedBoot partition parsing not available
    Creating 7 MTD partitions on &quot;spiflash&quot;:
    0x00000000-0x00030000 : &quot;RedBoot&quot;
    0x00030000-0x00050000 : &quot;stage2&quot;
    0x00050000-0x00150000 : &quot;/storage&quot;
    0x00150000-0x00490000 : &quot;part1&quot;
    0x00490000-0x007d0000 : &quot;part2&quot;
    0x007d0000-0x007e0000 : &quot;redboot config&quot;
    0x007e0000-0x00800000 : &quot;board config&quot;
    oprofile: using timer interrupt.
    NET: Registered protocol family 2
    IP route cache hash table entries: 512 (order: -1, 2048 bytes)
    TCP established hash table entries: 2048 (order: 2, 16384 bytes)
    TCP bind hash table entries: 2048 (order: 2, 16384 bytes)
    TCP: Hash tables configured (established 2048 bind 2048)
    TCP reno registered
    ip_conntrack version 2.4 (256 buckets, 2048 max) - 232 bytes per conntrack
    ip_conntrack_pptp version 3.1 loaded
    ip_nat_pptp version 3.0 loaded
    ip_tables: (C) 2000-2006 Netfilter Core Team
    ClusterIP Version 0.8 loaded successfully
    TCP bic registered
    NET: Registered protocol family 1
    NET: Registered protocol family 17
    Bridge firewalling registered
    Freeing unused kernel memory: 8832k freed
    init started:  BusyBox v1.1.0 (2007.03.05-17:58+0000) multi-call binary

    Please press Enter to activate this console.
</code></pre>
<p>Disassembly instructions and serial port layout taken from
<a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Meraki/Mini">OpenWRT Meraki</a>. Hardware
sourced from <a href="http://meraki.com/">Meraki</a> USB to Serial, part number FTDI
TTL-232R-3V3, cable provided by <a href="http://www.glyn.co.nz/index.htm">GLYN Ltd</a></p>
<p>Pictures to follow.</p>
</div>


        <div class="container content">
          <small>Copyright © Tim McGilchrist 2007-2024</small>
          <br>
          <small>Powered by <a href="https://github.com/tmcgilchrist/lambdafoo.com">Hakyll</a></small>
        </div>
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
    </body>
</html>
