<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>My Hakyll Blog - index</title>
        <link rel="stylesheet" type="text/css" href="../../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../../css/screen.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../../">My Hakyll Blog</a>
            </div>
            <div id="navigation">
                <a href="../../">Home</a>
                <a href="../../about.html">About</a>
                <a href="../../talks.html">Talks</a>
                <a href="../../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>index</h1>

            <p><!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]--> <!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]--> <!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]--> <!--[if gt IE 8]><!--></p>
<p><!--<![endif]--></p>
<p><!-- Begin slides --></p>
<section id="title-slide" class="slide">
<h1 id="erlang-webdev-with-webmachine">Erlang WebDev with WebMachine</h1>
<h3 id="tim-mcgilchrist-lambda_foo">Tim McGilchrist (@lambda_foo)</h3>
</section>
<section id="outline" class="slide">
<h2 id="outline">Outline</h2>
<ul>
<li>
What is Webmachine?
</li>
<li>
General structure of a project
</li>
<ul>
<li>Resources</li>
<li>Dispatch</li>
</ul>
<li>
ErlDTL Templates
</li>
<li>
Using Rebar
</li>
</ul>
</section>
<section id="web_development" class="slide">
<h2 id="web-development">Web Development</h2>
<p>Any language worth it’s salt needs to provide a web development library or three.<br />
www.coboloncogs.org anyone? Srsly</p>
<p>General approaches to the web:</p>
<ul>
<li>focus on heavy three-tier applications. Java/EE</li>
<li>hide the web behind language-specific constructs. Rails/Django</li>
<li>provide low-level access to HTTP. Node.js</li>
</ul>
</section>
<section id="what_webmachine" class="slide">
<h2 id="what-is-webmachine">What is Webmachine?</h2>
<p>“Written in Erlang, Webmachine is an application layer that adds server-side HTTP semantic awareness on top of the excellent bit-pushing and HTTP syntax-management provided by mochiweb, ” wiki.basho.com/Webmachine.html</p>
<ul>
<li>Resource Oriented</li>
<li>HTTP Semantics</li>
<li>Simple</li>
</ul>
<p>WebMachine is not a “framework”!</p>
</section>
<section id="htttp_simple?" class="slide">
<h2 id="http-is-simple-right">HTTP is Simple, Right?</h2>
<img src="../../erl-syd-2012-webmachine/images/http_flow.png" />
</section>
<section id="hello_webmachine" class="slide">
<h2 id="hello-world-webmachine-style">Hello World WebMachine style</h2>
<pre><code>-module(hello_resource).
-export([init/1, to_html/2]).
-include_lib(&quot;webmachine/include/webmachine.hrl&quot;).

init([]) -&gt;
    {ok, undefined}.

to_html(ReqData, State) -&gt;
    {&quot;Hello, Webmachine world&quot;, ReqData, State}.

  </code></pre>
<img src="../../erl-syd-2012-webmachine/images/http_200.png" />
</section>
<section id="general_structure" class="slide">
<h2 id="webmachine-layout">WebMachine Layout</h2>
<img src="../../erl-syd-2012-webmachine/images/webmachine-layout.png" />
</section>
<section id="wm_dispatch" class="slide">
<h2 id="dispatch-rules">Dispatch Rules</h2>
<img src="../../erl-syd-2012-webmachine/images/webmachine-dispatch.png" />
<ul>
<li>Define URI paths via {pathspec, resource, args} or {pathspec, guard, resource, args}</li>
<li>Terms used to match a rule are available via wrq:path_info(id, ReqData)</li>
<li>Located in priv/dispatch.conf under the application root</li>
</ul>
</section>
<section id="dispatch_example" class="slide">
<h2 id="dispatch-example">Dispatch Example</h2>
<pre><code>    {[&quot;todos&quot;, &quot;*&quot;], sm_todos_resource, []}.

    GET &quot;/todos/12/author&quot;

    &quot;12/author&quot;        =&gt; wrq:disp_path
    &quot;/todos/12/author&quot; =&gt; wrq:path
    []                 =&gt; wrq:path_info
    [&quot;12&quot;, &quot;author&quot;]   =&gt; wrq:path_tokens
  </code></pre>
</section>
<section id="wm_resources" class="slide">
<h2 id="resources">Resources</h2>
<p><strong>WebMachine is a resource server for the web!</strong></p>
<p>Driven via HTTP methods; GET, PUT, POST, DELETE</p>
<p>Uses correct HTTP status codes.</p>
<p>Well defined place to handle each HTTP method.</p>
<ul>
<li>GET =&gt; content_types_provided() and to_html()</li>
<li>PUT =&gt; content_types_accepted() and from_html()</li>
<li>POST =&gt; create_path() or process_post()</li>
<li>DELETE =&gt; delete_resource()</li>
</ul>
</section>
<section id="resource_example" class="slide">
<h2 id="example">Example</h2>
<p>A Todo Resource pulled from a demo app.</p>
<img src="../../erl-syd-2012-webmachine/images/resources_1.png" />
</section>
<section id="resource_example2" class="slide">
<h2 id="example-cont">Example Cont</h2>
<img src="../../erl-syd-2012-webmachine/images/resources_2.png" />
</section>
<section id="resource_post" class="slide">
<h2 id="problems-with-post">Problems with POST</h2>
<ul>
<li>
Overloaded Semantics
</li>
<li>
Create or Update?
</li>
<li>
Switch on post_is_create()
</li>
<ul>
<li>true + create_path() = create</li>
<li>false + process_post() = update</li>
</ul>
</ul>
<img src="../../erl-syd-2012-webmachine/images/rage_face.jpg" />
</section>
<section id="erldtl_templates" class="slide">
<h2 id="erldtl-templates">ErlDTL Templates</h2>
<p>Django style templates for Erlang, similar to JSP and ERB templates.<br />
<a href="https://github.com/evanmiller/erlydtl">https://github.com/evanmiller/erlydtl</a></p>
<ul>
<li>Simple html with tags sprinkled throughout.</li>
<li>Place in <strong>templates</strong> directory and rebar knows what to do</li>
<li>Call it just like an Module, eg todo_dtl:render([Arg])</li>
</ul>
<img src="../../erl-syd-2012-webmachine/images/erldtl-templates.png" />
</section>
<section id="rebar" class="slide">
<h2 id="building-with-rebar">Building with Rebar</h2>
<ol>
<li>Create a top level rebar.conf</li>
<li>Put in your dependencies</li>
<li>Compile and off you go</li>
</ol>
<img src="../../erl-syd-2012-webmachine/images/rebar-config.png" />
</section>
<section id="gotcha" class="slide">
<h2 id="recap">Recap</h2>
<ul>
<li>WebMachine is brutally RESTful!</li>
<li>Is not a framework!</li>
<li>Conforms to HTTP RFC (methods, status codes)</li>
<li>Is all about Resources</li>
</ul>
<p>You need to provide <strong>all</strong> the plumbing.<br />
Want to serve JS &amp; CSS, you write the resource.<br />
Authorisation? Callback provided and you write the rest.<br />
DB / ORM? Same.</p>
<p><strong>Get the picture?</strong></p>
</section>
<section id="resources" class="slide">
<h2 id="resources-1">Resources</h2>
<ul>
<li>http://wiki.basho.com/Webmachine.html</li>
<li>https://github.com/basho/rebar</li>
<li>http://alancastro.org/2010/05/01/erlang-application-management-with-rebar.html</li>
<li>http://learnyousomeerlang.com/ - Erlang eBook</li>
<li>http://www.chicagoboss.org/ - Fully Featured Framework</li>
<li>https://github.com/mochi/mochiweb</li>
</ul>
</section>
<section id="questions" class="slide">
<h2 id="questions">Questions?</h2>
</section>
<section id="one_more" class="slide">
<h2 id="one-more-thing">One More thing!</h2>
<p><strong>Feedback and suggestions for Erlang Factory Lite.</strong></p>
<img src="../../erl-syd-2012-webmachine/images/erlang_factory_bris.png" />
</section>
<p><!-- deck.navigation snippet --> <a href="#" class="deck-prev-link" title="Previous">←</a> <a href="#" class="deck-next-link" title="Next">→</a> <!-- deck.status snippet --></p>
<p><span class="deck-status-current"></span> / <span class="deck-status-total"></span></p>
<p><!-- deck.goto snippet --></p>
<form action="." method="get" class="goto-form">
<p><label for="goto-slide">Go to slide:</label> <input type="text" name="slidenum" id="goto-slide" list="goto-datalist"> <datalist id="goto-datalist"></datalist> <input type="submit" value="Go"></p>
</form>
<p><!-- deck.hash snippet --> <a href="." class="deck-permalink" title="Permalink to this slide">#</a> <!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline --></p>
<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="jquery-1.7.min.js"><\/script>')</script>
<p><!-- Deck Core and extensions --></p>
<script src="../../erl-syd-2012-webmachine/core/deck.core.js"></script>
<script src="../../erl-syd-2012-webmachine/extensions/hash/deck.hash.js"></script>
<script src="../../erl-syd-2012-webmachine/extensions/menu/deck.menu.js"></script>
<script src="../../erl-syd-2012-webmachine/extensions/goto/deck.goto.js"></script>
<script src="../../erl-syd-2012-webmachine/extensions/status/deck.status.js"></script>
<script src="../../erl-syd-2012-webmachine/extensions/navigation/deck.navigation.js"></script>
<p><!-- Initialize the deck --></p>
<script>
$(function() {
	$.deck('.slide');
});
</script>
        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
